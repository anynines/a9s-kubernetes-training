<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">Persistent Volumes | Kubernetes Training</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://anynines.github.io/a9s-kubernetes-training/img/logo.svg"><meta data-react-helmet="true" name="twitter:image" content="https://anynines.github.io/a9s-kubernetes-training/img/logo.svg"><meta data-react-helmet="true" property="og:url" content="https://anynines.github.io/a9s-kubernetes-training/kubernetes/stateful-sets/persistent-volumes"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Persistent Volumes | Kubernetes Training"><meta data-react-helmet="true" name="description" content="This lesson covers the theoritical background necessary to understand the Persistent Volume concept in Kubernetes."><meta data-react-helmet="true" property="og:description" content="This lesson covers the theoritical background necessary to understand the Persistent Volume concept in Kubernetes."><link data-react-helmet="true" rel="shortcut icon" href="/a9s-kubernetes-training/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://anynines.github.io/a9s-kubernetes-training/kubernetes/stateful-sets/persistent-volumes"><link data-react-helmet="true" rel="alternate" href="https://anynines.github.io/a9s-kubernetes-training/kubernetes/stateful-sets/persistent-volumes" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://anynines.github.io/a9s-kubernetes-training/kubernetes/stateful-sets/persistent-volumes" hreflang="x-default"><script data-react-helmet="true" id="oil-configuration" type="application/configuration">
          {
            "config_version": 1,
            "publicPath": "/js",
            "advanced_settings": true,
            "default_to_optin": true,
            "gdpr_applies_globally": true,
            "timeout": -1,
            "local_url": "/oils-de.json",
            "iabVendorListUrl": "/vendorlist.json",
            "customVendorListUrl": "/vendors.json",
          }
        </script><script data-react-helmet="true" src="/oilstub.1.3.5-SNAPSHOT.min.js"></script><script data-react-helmet="true" src="/oil.1.3.5-SNAPSHOT.min.js"></script><link rel="stylesheet" href="/a9s-kubernetes-training/assets/css/styles.2dadb555.css">
<link rel="preload" href="/a9s-kubernetes-training/assets/js/runtime~main.53f35382.js" as="script">
<link rel="preload" href="/a9s-kubernetes-training/assets/js/main.ae597ea5.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/a9s-kubernetes-training/training-overview"><img src="/a9s-kubernetes-training/img/logo.svg" alt="anynines" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/a9s-kubernetes-training/img/logo.svg" alt="anynines" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Kubernetes Training</b></a><a class="navbar__item navbar__link" href="/a9s-kubernetes-training/containerization/container-overview">Container Training</a><a class="navbar__item navbar__link" href="/a9s-kubernetes-training/kubernetes/kubernetes-overview">Kubernetes Training</a><a class="navbar__item navbar__link" href="/a9s-kubernetes-training/postgresql/postgresql-overview">PostgreSQL on Kubernetes</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/anynines" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://paas.anynines.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>anynines PaaS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g">Introduction</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/training-overview">Kubernetes Training Overview</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g">Containerization</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/containerization/container-overview">Container Overview</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/containerization/container-intro">Containers Basics</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g" tabindex="0">Docker</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/docker/installation">Docker Installation</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/docker/docker-basics">Docker Basics</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/docker/creating-images">Creating Container Images</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/docker/simple-web-app">Containerizing a Simple Web App</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/docker/publish-image">Publishing a Container Image</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/docker/container-workflow">The Container Workflow</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/docker/docker-cheatsheet">Docker Cheat Sheet</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g">Kubernetes</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/kubernetes-overview">Kubernetes Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g" tabindex="0">Basics</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/basics/kubectl">kubectl Basics</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/basics/namespaces">Namespaces</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/basics/container-shell">Container Shell Access</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g" tabindex="0">Pods</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/pods/introduction">Pods</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g" tabindex="0">ReplicaSets and Services</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/replicaset-and-service/introduction">ReplicaSets and Services</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/replicaset-and-service/replicasets">ReplicaSets</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/replicaset-and-service/services">Services</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/replicaset-and-service/ingress">Ingress</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/replicaset-and-service/tidyup">Tyding Up</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g" tabindex="0">Deployments</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/deployments/deployments">Deployments</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g" tabindex="0">ConfigMaps and Secrets</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/configmaps-and-secrets/configmaps-and-secrets">ConfigMaps and Secrets</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/configmaps-and-secrets/configmaps">ConfigMaps</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/configmaps-and-secrets/exercise-explanation">Exercise Explanation</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/configmaps-and-secrets/configmaps-volume-mounts">ConfigMap Volume Mounts</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/configmaps-and-secrets/secrets">Secrets</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/configmaps-and-secrets/secrets-exercise-explanation">Secrets Exercise Explanation</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g" tabindex="0">Jobs</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/jobs/jobs">Jobs</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/jobs/advanced-jobs">Advanced Job Features</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/jobs/parallel-jobs">Parallel Jobs</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/jobs/cron-jobs">CronJobs</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g" tabindex="0">StatefulSets</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/a9s-kubernetes-training/kubernetes/stateful-sets/persistent-volumes">Persistent Volumes</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/stateful-sets/persistent-volumes-exercise">Persistent Volumes Excercise</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/stateful-sets/stateful-sets">StatefulSets</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/stateful-sets/stateful-set-postgresql">PostgreSQL StatefulSet</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/stateful-sets/stateful-set-headless-service">Headless Service</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/stateful-sets/stateful-set-vs-replicasets">StatefulSet vs. ReplicaSets</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/stateful-sets/stateful-set-psql-access-to-postgresql">PSQL Access to PostgreSQL</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/stateful-sets/stateful-set-application-access">Application Access to a StatefulSet</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/kubernetes/stateful-sets/stateful-set-conclusions">Conclusions</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g">PostgreSQL on Kubernetes</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/postgresql/postgresql-overview">Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g" tabindex="0">PostgreSQL Replication</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/postgresql/postgresql-theory/why-use-replication">Why use Replication?</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/postgresql/postgresql-theory/replication-outline">Replication Outline</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/postgresql/postgresql-theory/streaming-replication">PostgreSQL Streaming Replication</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/postgresql/postgresql-theory/setting-up-streaming-replication">Setting up Streaming Replication</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g" tabindex="0">StatefulSet with Replication</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/postgresql/stateful-sets-revisited/stateful-sets-revisited">StatefulSets Revisited</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/postgresql/building-the-pg-stateful-set/pg-service-primary">Service to Connnect to the Primary</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/postgresql/building-the-pg-stateful-set/streaming-replication-configmaps">Streaming Replication ConfigMaps</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/postgresql/building-the-pg-stateful-set/streaming-replication-sfs-init">Initializing the StatefulSet</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/postgresql/building-the-pg-stateful-set/replication-user">Creating a Replication User</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/postgresql/building-the-pg-stateful-set/verify-replication">Verifying the Replication</a></li></ul></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/a9s-kubernetes-training/postgresql/postgresql-outro">Outro</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Persistent Volumes</h1></header><p>This lesson covers the theoritical background necessary to understand the Persistent Volume concept in Kubernetes.</p><p>Persistent Volumes are introduced in this chapter although they can also be used with familiar Kubernetes resources such as Pods and ReplicaSets and - although many Kubernetes users do that  applications should be kept as stateless as possible. Therefore, note that state should be managed by stateful data services as proposed in the 12 factor manifest [14].</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="volumes"></a>Volumes<a class="hash-link" href="#volumes" title="Direct link to heading">#</a></h2><p><strong>Volumes bring persistency to containers</strong>. Containers are stateless in so far as changes to their filesystem will be lost if a container is restarted - more precicely rescheduled. Rescheduling means that the container is destroyed but a new container of the same kind is started somewhere in the cluster. This freshly created container will be derived from the given container image and hence won&#x27;t reflect any changes made in prior existing containers.</p><p><strong>Volumes allow sharing information among containers</strong>. At least some types of Volumes allow sharing of information among containers. A NFS Volume, for example, can be used to share assets such as photos uploaded by application users and store them on a shared files system. Be aware that this is an anti-pattern for cloud native applications which will store assets in an object store such as OpenStack Swift [3], Amazon S3 [4] or the alikes. Object stores scale horizontally for both load and capacity. In addition to that their availability and durability is usually higher than those of shared file systems. However, for some legacy applications this may be a valid choice.</p><p>More than that, Volumes are used in conjunction with concepts such as ConfigMaps and Secrets as shown in earlier lessons. Both ConfigMaps and Secrets can be either consumed as environment variables or be mounted as files. The latter option uses the concept of Kubernetes Volumes.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="volume-mounts"></a>Volume Mounts<a class="hash-link" href="#volume-mounts" title="Direct link to heading">#</a></h3><p>Within a Pod-definition volumes can be mounted to containers by using a so called <strong>volume mount</strong>. You are already familiar with the syntax as volume mounts have been used in the ConfigMap and Secrets lessons using the <code>volumeMounts</code> field in container specs.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="docker-volumes-vs-kubernetes-volumes"></a>Docker Volumes vs. Kubernetes Volumes<a class="hash-link" href="#docker-volumes-vs-kubernetes-volumes" title="Direct link to heading">#</a></h3><p>If you are familiar with Docker Volumes you may already recognized the difference between Kubernetes and Docker Volumes. In Kubernetes there are many more types of Volumes and the way to use them is more flexible. For example, in Kubernetes it is possible to mount multiple containers of multiple types into a single container. Additionally, the lifecycle of Volumes is clearly defined in Kubernetes. Volumes share the lifecycle of their Pods. They are created with their Pods and cease to exist when their Pods cease to exist. You will see that there are concepts such as the <em>Persistent Volume</em> with lifetimes exceeding the lifetime of their Pods.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="persistent-volumes-pv"></a>Persistent Volumes (PV)<a class="hash-link" href="#persistent-volumes-pv" title="Direct link to heading">#</a></h2><p>It may appear intuitive that Persistent Volumes (PV) are special types of Volumes but in fact there are two distinct Kubernetes resources.</p><p>As mentioned before, the <strong>major difference of Volumes and Persistent Volumes is their lifetime</strong>. Volumes exist as long as their corresponding Pods while <strong>Persistent Disks</strong> potentially survive Pods and may <strong>live as long as the Kubernetes cluster lives</strong>.</p><p>Persistent Volumes are not storage implementation but rather a storage abstraction. The Persistent Volume subsystem comprises resource types for creating and attaching volumes. In order to use Persistent Volumes you need to be familiar with the folling concepts:</p><ul><li>Persistent Volume (PV)</li><li>Persistent Volume Claim (PVC)</li><li>Storage Class</li><li>Storage Provisioner</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="persistent-volume"></a>Persistent Volume<a class="hash-link" href="#persistent-volume" title="Direct link to heading">#</a></h3><p>The Persistent Volume is what the name suggests: the actual volume where data is being stored. What exactly a Persistent Volume is, is up to its implementation. Often, a PV may be represented by a remotely attached block device such as an Amazon Block Store (AWS EBS) volume [5].</p><p>The Persistent Volume concept implies two important questions:</p><ol><li>How are Persistent Volumes created?</li><li>Where and when are Persistent Volumes associated and mounted to containers?</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="persistent-volume-claim-pcv"></a>Persistent Volume Claim (PCV)<a class="hash-link" href="#persistent-volume-claim-pcv" title="Direct link to heading">#</a></h3><p>Similar to Volumes, Persistent Volumes [2] are also mounted using the <code>volumeMount</code> field in the specification of a container. The volume mount basiscally says &quot;mount the persistent volume <code>x</code> to the path <code>y</code> of my container <code>z</code>. But <strong>before a volume mount can happen, the Persistent Volume must be requested using a Persistent Volume Claim</strong>. Think of storage as &quot;territory&quot; and a Persistent Volume Claim as a claim to a particular part of that &quot;territory&quot; or storage. Hence, <strong>a Persistent Volume Claim is a declarative description of a piece of storage requested by the user</strong>. In this sense, a PVC may sound like </p><p>Give me:</p><ul><li><em>&quot;3 gigabytes of fast ssd storage&quot;</em></li><li><em>&quot;500 gigabytes of cheap hard disk drive storage. You know the old rotating magnetic drives.&quot;</em></li><li><em>&quot;50 gigabytes of very reliable ssd storage&quot;</em></li></ul><p>As you can see these requests may include different <strong>quantities</strong> and <strong>qualitites</strong> of storage. While quantities are measures in bytes, qualities can be anything from <em>availability</em>, <em>durability</em> to <em>speed</em>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="storage-class"></a>Storage Class<a class="hash-link" href="#storage-class" title="Direct link to heading">#</a></h3><p>Sotarge Classes [13] are there to reflect the abovementioned qualities such as <em>availability</em>, <em>durability</em>, <em>speed</em>, <em>backup policies</em> etc.</p><p>This leads to the question where the difference of Persistent Volumes by Storage Class is actually manifested. Simply speaking, a Storage Class represents a configuration that is passed into a so called <em>Storage Provisioner</em>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="storage-provisioner"></a>Storage Provisioner<a class="hash-link" href="#storage-provisioner" title="Direct link to heading">#</a></h3><p>The Storage Provisioner is where Persistent Volumes of a particular Storage Classe are actually created.</p><p><strong>A Storage Provisioner is responsible for dynamically creating storage volumes corresponding to Persistent Volume Claims requsted by users</strong>.</p><p>The underlyting storage system can be anything from a software defined storage (SDN)[6] such as ceph [7], gluster [8], etc. to hardware appliances accessed directly or through the API of an infrastructure provider such as AWS [9], Azure [10], GCP [11] or AliCloud [12]. Each of these systems - along with many other storage solutions - have to be addressed in a particular way. This is the main subject of a Storage Provisioner implementation.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="manual-provisioning"></a>Manual Provisioning<a class="hash-link" href="#manual-provisioning" title="Direct link to heading">#</a></h3><p>The documentation [2] also mentions manual provisioning. In this case Persistent Volumes are pre-created by the cluster administrator. Applications then use Persistent Volume Claims to request a Persistent Volume from the pool of of PVs. While this use case may make sense in legacy use cases, such a stone age methodology should be avoided whenever possible. The absense of dynamic volume provisioning is likely to block the workflow of application developers during deployment when Persistent Volume Claims can&#x27;t be fulfilled as the cluster ran out of Persistent Volumes.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="links"></a>Links<a class="hash-link" href="#links" title="Direct link to heading">#</a></h2><ol><li>Kubernetes Documentation, Concepts, Storage, Volumes, <a href="https://kubernetes.io/docs/concepts/storage/volumes/" target="_blank" rel="noopener noreferrer">https://kubernetes.io/docs/concepts/storage/volumes/</a></li><li>Kubernetes Documentation, Concepts, Storage, Persistent Volumes, <a href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/" target="_blank" rel="noopener noreferrer">https://kubernetes.io/docs/concepts/storage/persistent-volumes/</a></li><li>OpenStack Swift, <a href="https://github.com/openstack/swift" target="_blank" rel="noopener noreferrer">https://github.com/openstack/swift</a></li><li>Amazon S3, <a href="https://aws.amazon.com/s3/" target="_blank" rel="noopener noreferrer">https://aws.amazon.com/s3/</a></li><li>Amazon EBS, <a href="https://aws.amazon.com/ebs/" target="_blank" rel="noopener noreferrer">https://aws.amazon.com/ebs/</a></li><li>Wikipedia, Software Defined Storage, <a href="https://en.wikipedia.org/wiki/Software-defined_storage" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Software-defined_storage</a></li><li>Ceph, <a href="https://ceph.io/" target="_blank" rel="noopener noreferrer">https://ceph.io/</a></li><li>gluster, <a href="https://www.gluster.org/" target="_blank" rel="noopener noreferrer">https://www.gluster.org/</a></li><li>Amazon Web Services, <a href="http://aws.amazon.com/" target="_blank" rel="noopener noreferrer">http://aws.amazon.com/</a></li><li>Microsoft Azure, <a href="https://azure.microsoft.com" target="_blank" rel="noopener noreferrer">https://azure.microsoft.com</a></li><li>Google Cloud Platform, <a href="https://cloud.google.com/" target="_blank" rel="noopener noreferrer">https://cloud.google.com/</a></li><li>Alibaba Cloud, <a href="https://eu.alibabacloud.com/" target="_blank" rel="noopener noreferrer">https://eu.alibabacloud.com/</a></li><li>Kubernetes ocumentation, Concepts, Storage Classes, <a href="https://kubernetes.io/docs/concepts/storage/storage-classes/" target="_blank" rel="noopener noreferrer">https://kubernetes.io/docs/concepts/storage/storage-classes/</a></li><li>The Tvelve Factor App, <a href="https://12factor.net/" target="_blank" rel="noopener noreferrer">https://12factor.net/</a></li></ol></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/a9s-kubernetes-training/kubernetes/jobs/cron-jobs"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« CronJobs</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/a9s-kubernetes-training/kubernetes/stateful-sets/persistent-volumes-exercise"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Persistent Volumes Excercise Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#volumes" class="table-of-contents__link">Volumes</a><ul><li><a href="#volume-mounts" class="table-of-contents__link">Volume Mounts</a></li><li><a href="#docker-volumes-vs-kubernetes-volumes" class="table-of-contents__link">Docker Volumes vs. Kubernetes Volumes</a></li></ul></li><li><a href="#persistent-volumes-pv" class="table-of-contents__link">Persistent Volumes (PV)</a><ul><li><a href="#persistent-volume" class="table-of-contents__link">Persistent Volume</a></li><li><a href="#persistent-volume-claim-pcv" class="table-of-contents__link">Persistent Volume Claim (PCV)</a></li><li><a href="#storage-class" class="table-of-contents__link">Storage Class</a></li><li><a href="#storage-provisioner" class="table-of-contents__link">Storage Provisioner</a></li><li><a href="#manual-provisioning" class="table-of-contents__link">Manual Provisioning</a></li></ul></li><li><a href="#links" class="table-of-contents__link">Links</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">More from anynines</h4><ul class="footer__items"><li class="footer__item"><a href="https://anynines.com/?utm_source=k8s-tutorial&amp;utm_medium=web" target="_blank" rel="noopener noreferrer" class="footer__link-item">anynines.com</a></li><li class="footer__item"><a href="https://paas.anynines.com/?utm_source=k8s-tutorial&amp;utm_medium=web" target="_blank" rel="noopener noreferrer" class="footer__link-item">anynines PaaS</a></li><li class="footer__item"><a href="https://anynines.com/jobs/?utm_source=k8s-tutorial&amp;utm_medium=web" target="_blank" rel="noopener noreferrer" class="footer__link-item">Jobs at anynines</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Follow us</h4><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/anynines" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.linkedin.com/company/anynines/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn</a></li><li class="footer__item"><a href="https://instagram.com/anyninescom" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instagram</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Legal</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.anynines.com/imprint" target="_blank" rel="noopener noreferrer" class="footer__link-item">Imprint</a></li><li class="footer__item"><a href="https://www.anynines.com/data-privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2021 anynines GmbH.</div></div></div></footer></div>
<script src="/a9s-kubernetes-training/assets/js/runtime~main.53f35382.js"></script>
<script src="/a9s-kubernetes-training/assets/js/main.ae597ea5.js"></script>
</body>
</html>