<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">StatefulSet vs. ReplicaSets | Kubernetes Training</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://anynines.github.io/a9s-kubernetes-training//img/logo.svg"><meta data-react-helmet="true" name="twitter:image" content="https://anynines.github.io/a9s-kubernetes-training//img/logo.svg"><meta data-react-helmet="true" property="og:url" content="https://anynines.github.io/a9s-kubernetes-training//kubernetes/stateful-sets/stateful-set-vs-replicasets"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="StatefulSet vs. ReplicaSets | Kubernetes Training"><meta data-react-helmet="true" name="description" content="In the last lession you have scaled the PostgreSQL StatefulSet to 3 replicas so that it now consists of 3 Pods."><meta data-react-helmet="true" property="og:description" content="In the last lession you have scaled the PostgreSQL StatefulSet to 3 replicas so that it now consists of 3 Pods."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://anynines.github.io/a9s-kubernetes-training//kubernetes/stateful-sets/stateful-set-vs-replicasets"><link data-react-helmet="true" rel="alternate" href="https://anynines.github.io/a9s-kubernetes-training//kubernetes/stateful-sets/stateful-set-vs-replicasets" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://anynines.github.io/a9s-kubernetes-training//kubernetes/stateful-sets/stateful-set-vs-replicasets" hreflang="x-default"><script data-react-helmet="true" id="oil-configuration" type="application/configuration">
          {
            "config_version": 1,
            "publicPath": "/js",
            "advanced_settings": true,
            "default_to_optin": true,
            "gdpr_applies_globally": true,
            "timeout": -1,
            "local_url": "/oils-de.json",
            "iabVendorListUrl": "/vendorlist.json",
            "customVendorListUrl": "/vendors.json",
          }
        </script><script data-react-helmet="true" src="/oilstub.1.3.5-SNAPSHOT.min.js"></script><script data-react-helmet="true" src="/oil.1.3.5-SNAPSHOT.min.js"></script><link rel="stylesheet" href="/assets/css/styles.2dadb555.css">
<link rel="preload" href="/assets/js/runtime~main.c175611c.js" as="script">
<link rel="preload" href="/assets/js/main.4c268502.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/training-overview"><img src="/img/logo.svg" alt="anynines" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="anynines" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Kubernetes Training</b></a><a class="navbar__item navbar__link" href="/containerization/container-overview">Container Training</a><a class="navbar__item navbar__link" href="/kubernetes/kubernetes-overview">Kubernetes Training</a><a class="navbar__item navbar__link" href="/postgresql/postgresql-overview">PostgreSQL on Kubernetes</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/anynines" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://paas.anynines.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>anynines PaaS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g">Introduction</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/training-overview">Kubernetes Training Overview</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g">Containerization</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/containerization/container-overview">Container Overview</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/containerization/container-intro">Containers Basics</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g" tabindex="0">Docker</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docker/installation">Docker Installation</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docker/docker-basics">Docker Basics</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docker/creating-images">Creating Container Images</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docker/simple-web-app">Containerizing a Simple Web App</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docker/publish-image">Publishing a Container Image</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docker/container-workflow">The Container Workflow</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docker/docker-cheatsheet">Docker Cheat Sheet</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g">Kubernetes</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/kubernetes-overview">Kubernetes Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g" tabindex="0">Basics</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/basics/kubectl">kubectl Basics</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/basics/namespaces">Namespaces</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/basics/container-shell">Container Shell Access</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g" tabindex="0">Pods</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/pods/introduction">Pods</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g" tabindex="0">ReplicaSets and Services</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/replicaset-and-service/introduction">ReplicaSets and Services</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/replicaset-and-service/replicasets">ReplicaSets</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/replicaset-and-service/services">Services</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/replicaset-and-service/ingress">Ingress</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/replicaset-and-service/tidyup">Tyding Up</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g" tabindex="0">Deployments</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/deployments/deployments">Deployments</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g" tabindex="0">ConfigMaps and Secrets</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/configmaps-and-secrets/configmaps-and-secrets">ConfigMaps and Secrets</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/configmaps-and-secrets/configmaps">ConfigMaps</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/configmaps-and-secrets/exercise-explanation">Exercise Explanation</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/configmaps-and-secrets/configmaps-volume-mounts">ConfigMap Volume Mounts</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/configmaps-and-secrets/secrets">Secrets</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/configmaps-and-secrets/secrets-exercise-explanation">Secrets Exercise Explanation</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g" tabindex="0">Jobs</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/jobs/jobs">Jobs</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/jobs/advanced-jobs">Advanced Job Features</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/jobs/parallel-jobs">Parallel Jobs</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/jobs/cron-jobs">CronJobs</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g" tabindex="0">StatefulSets</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/stateful-sets/persistent-volumes">Persistent Volumes</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/stateful-sets/persistent-volumes-exercise">Persistent Volumes Excercise</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/stateful-sets/stateful-sets">StatefulSets</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/stateful-sets/stateful-set-postgresql">PostgreSQL StatefulSet</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/stateful-sets/stateful-set-headless-service">Headless Service</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/kubernetes/stateful-sets/stateful-set-vs-replicasets">StatefulSet vs. ReplicaSets</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/stateful-sets/stateful-set-psql-access-to-postgresql">PSQL Access to PostgreSQL</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/stateful-sets/stateful-set-application-access">Application Access to a StatefulSet</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/stateful-sets/stateful-set-conclusions">Conclusions</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g">PostgreSQL on Kubernetes</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/postgresql/postgresql-overview">Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g" tabindex="0">PostgreSQL Replication</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/postgresql/postgresql-theory/why-use-replication">Why use Replication?</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/postgresql/postgresql-theory/replication-outline">Replication Outline</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/postgresql/postgresql-theory/streaming-replication">PostgreSQL Streaming Replication</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/postgresql/postgresql-theory/setting-up-streaming-replication">Setting up Streaming Replication</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_1J2g" tabindex="0">StatefulSet with Replication</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/postgresql/stateful-sets-revisited/stateful-sets-revisited">StatefulSets Revisited</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/postgresql/building-the-pg-stateful-set/pg-service-primary">Service to Connnect to the Primary</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/postgresql/building-the-pg-stateful-set/streaming-replication-configmaps">Streaming Replication ConfigMaps</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/postgresql/building-the-pg-stateful-set/streaming-replication-sfs-init">Initializing the StatefulSet</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/postgresql/building-the-pg-stateful-set/replication-user">Creating a Replication User</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/postgresql/building-the-pg-stateful-set/verify-replication">Verifying the Replication</a></li></ul></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/postgresql/postgresql-outro">Outro</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>StatefulSet vs. ReplicaSets</h1></header><p>In the last lession you have scaled the PostgreSQL StatefulSet to 3 replicas so that it now consists of 3 Pods.</p><p>In this lesson you will conduct more experiments to become familiar with the particularities and similarities of StatefulSets compared to other resource types such as ReplicaSets and Deployments.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="statefulsets-vs-replicasets"></a>StatefulSets vs. ReplicaSets<a class="hash-link" href="#statefulsets-vs-replicasets" title="Direct link to heading">#</a></h2><p>The most obvious similiarity between StatefulSets and ReplicaSets is their name as both contain the word &quot;Set&quot;.</p><p>Just like a ReplicaSet a StatefulSet is more than just a collection of Pods. Similar to a ReplicaSet Controller is watchinv over the Pods of a ReplicaSet, a StatefulSet Controller is watching all Pods of a StatefulSet.</p><p><strong>Let&#x27;s see this in action!</strong></p><p>Open a terminal window and observe the Pods of your StatefulSet continuously:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain">kubectl get pods -l </span><span class="token assign-left variable" style="color:rgb(214, 222, 235)">app</span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain">postgresql-a -w</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This will produce an output such as:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain">NAME               READY   STATUS    RESTARTS   AGE</span></span><span class="token-line" style="color:#d6deeb"><span class="token plain">postgresql-sfs-0   </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">          34m</span></span><span class="token-line" style="color:#d6deeb"><span class="token plain">postgresql-sfs-1   </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">          24s</span></span><span class="token-line" style="color:#d6deeb"><span class="token plain">postgresql-sfs-2   </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">/1     Running   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">          23s</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>And it will also block the terminal window. <strong>Place the windows so that you can keep an eye on it and open another terminal window</strong>. You should now see both terminal windows simultaneously. </p><p>In the new window disturb the StatefulSet by deleting one of its Pods:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain">kubectl delete pod postgresql-sfs-1</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Watch what&#x27;s happening:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain">postgresql-sfs-1   </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">/1     Terminating   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">          3m44s</span></span><span class="token-line" style="color:#d6deeb"><span class="token plain">postgresql-sfs-1   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">/1     Terminating   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">          3m45s</span></span><span class="token-line" style="color:#d6deeb"><span class="token plain">postgresql-sfs-1   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">/1     Terminating   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">          3m52s</span></span><span class="token-line" style="color:#d6deeb"><span class="token plain">postgresql-sfs-1   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">/1     Terminating   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">          3m52s</span></span><span class="token-line" style="color:#d6deeb"><span class="token plain">postgresql-sfs-1   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">/1     Pending       </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">          0s</span></span><span class="token-line" style="color:#d6deeb"><span class="token plain">postgresql-sfs-1   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">/1     Pending       </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">          0s</span></span><span class="token-line" style="color:#d6deeb"><span class="token plain">postgresql-sfs-1   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">/1     ContainerCreating   </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">          0s</span></span><span class="token-line" style="color:#d6deeb"><span class="token plain">postgresql-sfs-1   </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain">/1     Running             </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain">          1s</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>The delete Pod has been recreated</strong>. </p><p>Check the StatefulSet:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain">kubectl get statefulset postgresql-sfs</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>All three Pods are back and <code>Running</code>. So what happened here? </p><p>The StatefulSet Controller has been told to nurse three (3) Pods and that&#x27;s what it does. As a &quot;higher ranked officer&quot; it does not care why a Pod has been lost. All it does is to apply the <code>desired state vs actual state</code>-comparison, recognize that a Pod is missing and take a corrective action: creating the missing Pod.</p><p>Another takeaway from this example is how the Pod identity in a StatefulSet is respected during self-healing. The newly created Pod has the same name: <code>postgresql-sfs-1</code> and the same Persistent Volume Claim <code>data-postgresql-sfs-1</code> which results in the same Persistent Volume and hence the same persisted data! In other words: the node has been recovered as it was before.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="statefulsets-vs-deployments"></a>StatefulSets vs. Deployments<a class="hash-link" href="#statefulsets-vs-deployments" title="Direct link to heading">#</a></h2><p>In contrast to ReplicaSets but similar to Deployments, StatefulSets support update stragies such as <code>RollingUpdate</code> and <code>OnDelete</code>. </p><p>For this reason, <strong>StatefulSets are neither stateful ReplicaSets nor stateful Deployments. They are entities on their own sharing similarities with both</strong>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="tidy-up"></a>Tidy Up<a class="hash-link" href="#tidy-up" title="Direct link to heading">#</a></h2><p>Now revert your changes by editing <code>30-stateful-set.yaml</code> to the StatefulSet and set the number of replicas back to 1: <code>replicas: 1</code>.</p><p>Apply the changes by executing:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain">kubectl apply -f </span><span class="token number" style="color:rgb(247, 140, 108)">30</span><span class="token plain">-stateful-set.yaml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="links"></a>Links<a class="hash-link" href="#links" title="Direct link to heading">#</a></h2><ol><li>Kubernetes Documentation - Tutorials - StatefulSet Basics, <a href="https://kubernetes.io/docs/tutorials/stateful-application/basic-stateful-set" target="_blank" rel="noopener noreferrer">https://kubernetes.io/docs/tutorials/stateful-application/basic-stateful-set</a></li></ol></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/kubernetes/stateful-sets/stateful-set-headless-service"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Headless Service</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/kubernetes/stateful-sets/stateful-set-psql-access-to-postgresql"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">PSQL Access to PostgreSQL Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#statefulsets-vs-replicasets" class="table-of-contents__link">StatefulSets vs. ReplicaSets</a></li><li><a href="#statefulsets-vs-deployments" class="table-of-contents__link">StatefulSets vs. Deployments</a></li><li><a href="#tidy-up" class="table-of-contents__link">Tidy Up</a></li><li><a href="#links" class="table-of-contents__link">Links</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">More from anynines</h4><ul class="footer__items"><li class="footer__item"><a href="https://anynines.com/?utm_source=k8s-tutorial&amp;utm_medium=web" target="_blank" rel="noopener noreferrer" class="footer__link-item">anynines.com</a></li><li class="footer__item"><a href="https://paas.anynines.com/?utm_source=k8s-tutorial&amp;utm_medium=web" target="_blank" rel="noopener noreferrer" class="footer__link-item">anynines PaaS</a></li><li class="footer__item"><a href="https://anynines.com/jobs/?utm_source=k8s-tutorial&amp;utm_medium=web" target="_blank" rel="noopener noreferrer" class="footer__link-item">Jobs at anynines</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Follow us</h4><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/anynines" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.linkedin.com/company/anynines/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn</a></li><li class="footer__item"><a href="https://instagram.com/anyninescom" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instagram</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Legal</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.anynines.com/imprint" target="_blank" rel="noopener noreferrer" class="footer__link-item">Imprint</a></li><li class="footer__item"><a href="https://www.anynines.com/data-privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2021 anynines GmbH.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.c175611c.js"></script>
<script src="/assets/js/main.4c268502.js"></script>
</body>
</html>