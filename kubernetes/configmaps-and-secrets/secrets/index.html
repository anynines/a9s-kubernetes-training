<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">Secrets | Kubernetes Training</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://learn.kubernetes.anynines.com/img/logo.svg"><meta data-react-helmet="true" name="twitter:image" content="https://learn.kubernetes.anynines.com/img/logo.svg"><meta data-react-helmet="true" property="og:url" content="https://learn.kubernetes.anynines.com/kubernetes/configmaps-and-secrets/secrets"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Secrets | Kubernetes Training"><meta data-react-helmet="true" name="description" content="Related Videos"><meta data-react-helmet="true" property="og:description" content="Related Videos"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://learn.kubernetes.anynines.com/kubernetes/configmaps-and-secrets/secrets"><link data-react-helmet="true" rel="alternate" href="https://learn.kubernetes.anynines.com/kubernetes/configmaps-and-secrets/secrets" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://learn.kubernetes.anynines.com/kubernetes/configmaps-and-secrets/secrets" hreflang="x-default"><script data-react-helmet="true" id="oil-configuration" type="application/configuration">
          {
            "config_version": 1,
            "publicPath": "/",
            "advanced_settings": true,
            "default_to_optin": true,
            "gdpr_applies_globally": true,
            "timeout": -1,
            "local_url": "/oils-de.json",
            "iabVendorListUrl": "/vendorlist.json",
            "customVendorListUrl": "/vendors.json",
          }
        </script><script data-react-helmet="true" src="/oilstub.1.3.5-SNAPSHOT.min.js"></script><script data-react-helmet="true" src="/oil.1.3.5-SNAPSHOT.min.js"></script><link rel="stylesheet" href="/assets/css/styles.f7ace848.css">
<link rel="preload" href="/assets/js/runtime~main.dc5c9b92.js" as="script">
<link rel="preload" href="/assets/js/main.de5502fe.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/training-overview"><img src="/img/logoLight.svg" alt="anynines" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="anynines" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Kubernetes Training</b></a><a class="navbar__item navbar__link" href="/containerization/container-overview">Container Training</a><a class="navbar__item navbar__link" href="/kubernetes/kubernetes-overview">Kubernetes Training</a><a class="navbar__item navbar__link" href="/postgresql/postgresql-overview">PostgreSQL on Kubernetes</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/anynines/a9s-kubernetes-training" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Fork me<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/anynines" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://paas.anynines.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>anynines PaaS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Introduction</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Containerization</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Kubernetes</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/kubernetes-overview">Kubernetes Overview</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Basics</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Pods</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">ReplicaSets and Services</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Deployments</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">ConfigMaps and Secrets</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/configmaps-and-secrets/configmaps-and-secrets">ConfigMaps and Secrets</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/configmaps-and-secrets/configmaps">ConfigMaps</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/configmaps-and-secrets/exercise-explanation">Exercise Explanation</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/configmaps-and-secrets/configmaps-volume-mounts">ConfigMap Volume Mounts</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/kubernetes/configmaps-and-secrets/secrets">Secrets</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes/configmaps-and-secrets/secrets-exercise-explanation">Secrets Exercise Explanation</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Jobs</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">StatefulSets</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">PostgreSQL on Kubernetes</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Secrets</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="related-videos"></a>Related Videos<a class="hash-link" href="#related-videos" title="Direct link to heading">#</a></h2><div style="padding-top:10px;padding-bottom:1.8em"><style data-emotion="css 1tz8m30">.css-1tz8m30{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;width:100%;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;margin-top:-32px;width:calc(100% + 32px);margin-left:-32px;}.css-1tz8m30>.MuiGrid-item{padding-top:32px;}.css-1tz8m30>.MuiGrid-item{padding-left:32px;}</style><div class="jss1 MuiGrid-root MuiGrid-container MuiGrid-spacing-xs-4 css-1tz8m30"><style data-emotion="css 1085lws">.css-1085lws{box-sizing:border-box;margin:0;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}@media (min-width:600px){.css-1085lws{-webkit-flex-basis:100%;-ms-flex-preferred-size:100%;flex-basis:100%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:100%;}}@media (min-width:1200px){.css-1085lws{-webkit-flex-basis:33.333333%;-ms-flex-preferred-size:33.333333%;flex-basis:33.333333%;-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;max-width:33.333333%;}}</style><div class="jss1 MuiGrid-root MuiGrid-item MuiGrid-grid-xs-12 MuiGrid-grid-sm-12 MuiGrid-grid-lg-4 css-1085lws"><div style="padding-bottom:56.25%;padding-top:0;position:relative;height:0;border-radius:4px;overflow:hidden;margin-bottom:14px"><iframe class="fadedVideo" style="width:100%;height:100%;top:0;left:0;position:absolute" width="320" src="https://www.youtube-nocookie.com/embed/vFGlpm1ctYw?rel=0&amp;modestbranding=1&amp;playsinline=0&amp;controls=2" title="YouTube video player" frameborder="0" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div><style data-emotion="css u7ipk">.css-u7ipk{margin:0;font-family:"Roboto","Helvetica","Arial",sans-serif;font-weight:500;font-size:0.875rem;line-height:1.57;letter-spacing:0.00714em;font-weight:800;}</style><h6 class="jss2 MuiTypography-root MuiTypography-subtitle2 css-u7ipk">Secrets</h6></div></div><style data-emotion="css 39bbo6">.css-39bbo6{margin:0;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;border-width:0;border-style:solid;border-color:rgba(0, 0, 0, 0.12);border-bottom-width:thin;}</style><hr class="jss3 MuiDivider-root MuiDivider-fullWidth css-39bbo6" style="padding-top:1.8em"></div><p>Secrets are represented as key value pair and thus are very similar to ConfigMaps. However, ConfigMaps are meant for non-sensitive configuration data aiming at making application code portable across environments. So - analog to ConfigMaps - <strong>Secrets are key value sets but for sensitive data</strong>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="types-of-secrets"></a>Types of Secrets<a class="hash-link" href="#types-of-secrets" title="Direct link to heading">#</a></h2><p>&quot;Secrets should have a Type field to allow the Kubelet and other system components to take action based on the secret&#x27;s type.&quot; [4]</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="secret-types"></a>Secret Types<a class="hash-link" href="#secret-types" title="Direct link to heading">#</a></h2><p>You may have noticed that - compared to the creation of ConfigMaps - there&#x27;s an additional argument named <code>generic</code>.</p><p>Secrets have an additional <code>type</code>-field that tells other Kubernetes components to deal with a particular Secret in a particular way.</p><p>The following Secret Types are often supported:</p><ul><li>Generic (Opaque)</li><li>Docker Registry</li><li>TLS</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="generic"></a>Generic<a class="hash-link" href="#generic" title="Direct link to heading">#</a></h3><p><strong>The most common secret type is <code>generic</code> / <code>opaque</code></strong> and is meant for creating secrets from a local file, local directory or a fixed value as provided with a literal.</p><p>This lesson focuses the secret type <code>generic</code> and you will find practical examples below.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="tls"></a>TLS<a class="hash-link" href="#tls" title="Direct link to heading">#</a></h3><p>Kubernetes offers a tooling to manage TLS Certificates as proposed in the ACME draft [6].</p><p>Kubernetes:</p><blockquote><p>Lets you provision TLS certificates signed by a Certificate Authority (CA) that you control. These CA and certificates can be used by your workloads to establish trust. [7]</p></blockquote><p>See [7] to learn more about managing TLS Certificates with Kubernetes as the topic is outside of this lesson.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="docker-registry"></a>Docker Registry<a class="hash-link" href="#docker-registry" title="Direct link to heading">#</a></h3><p>So far all container images have been pulled from Docker Hub[5], the Kubernetes default registry. Often there are reasons to use alternative container registries. One reason may be to choose a registry being within the same network as the Kubernetes cluster so that traffic of pulling container images is contained within the private network.</p><p>In the case a private registry is to be used Kubernetes has to authenticate requests issued towards the registry. This is the purpose of Docker Registry Secrets.</p><p>Creating Container Registry Secrets will be covered in a later lesson.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="creating-generic-secrets"></a>Creating Generic Secrets<a class="hash-link" href="#creating-generic-secrets" title="Direct link to heading">#</a></h2><p>Generic Secrets is what most people associated with Secrets. They are often used to represent access credentials such as host, username and password sets.</p><p>The syntax for creating a <code>generic</code> Secret is close to creating a ConfigMap. They can be created from literals:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain">kubectl create secret generic area51 --from-literal</span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain">are-we-alone</span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain">dontknow --from-literal</span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain">username</span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain">admin --from-literal</span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain">password</span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain">ooHao9oh</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Or from files (or a mixture of both):</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain">kubectl create secret generic area52 --from-file</span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain">./90-username.txt --from-file</span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain">AA-password.txt</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Where <code>90-username.txt</code> may look like:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain">fileadmin</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>And <code>AA-password.txt</code> contains a password in a single line:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain">Gash1voh</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="accessing-secrets-using-kubectl"></a>Accessing Secrets Using <code>kubectl</code><a class="hash-link" href="#accessing-secrets-using-kubectl" title="Direct link to heading">#</a></h2><p>Once created secrets can be listed as usual using <code>kubectl get</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain">kubectl get secrets</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Note that Kubernetes refers to the generic type as <code>Opaque</code> which means that the Secret is a list of arbitrary key value pairs. This is in contrast to purpose bound types such as TLS and Docker Registry Secrets which are associated with additional behavior of the Kubernetes cluster.</p><p>In order to get more information about the Secret <code>kubectl describe</code> helps:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain">kubectl describe secret area51</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This won&#x27;t print the Secret&#x27;s values, but it will show its metadata and keys.</p><p><strong>Secret values can be decoded</strong> by issuing:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain">kubectl get secret area51 -o yaml</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Generally speaking <strong>it is a bad idea to store secrets in a plain text file that can be purposely or accidentally checked into a source control system such as Git.</strong> Do not store your secrets outside of an encrypted password store. If you are aware of this and take care of excluding YAML definitions of your Secrets from source control, it is ok to have YAML files though.</p><p><strong>Did you recognize that the values of the Secret do not match the values that have been passed during their creation?</strong></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="editing-a-secret"></a>Editing a Secret<a class="hash-link" href="#editing-a-secret" title="Direct link to heading">#</a></h2><p>Secrets can be edited by using:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain">kubectl edit secrets area51</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>On most Unix/Linux computers this will open a local text editor open such as <code>nano</code> or <code>vim</code> [8].</p><p>Saving the edited Secret will automatically <code>replace</code> the secret as if <code>kubectl replace</code> had been executed.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="exercise"></a>Exercise<a class="hash-link" href="#exercise" title="Direct link to heading">#</a></h3><p><strong>Try to change the value corresponding to the key <code>username</code> and save it.</strong></p><p>Do you receive the following error?</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain">error: secrets </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;area51&quot;</span><span class="token plain"> could not be patched: error decoding from json: illegal base64 data at input byte </span><span class="token number" style="color:rgb(247, 140, 108)">4</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The reason why this command didn&#x27;t succeed is that <strong>Secret values are base64 encoded by Kubernetes</strong>. This is not encryption but at least it obfuscated values so that a brief look at them doesn&#x27;t tell the secret. This is not really safe, but we&#x27;ll come back to this later. For now, just be aware that Secret values are base64 encoded and therefore <strong>pasting plain text values won&#x27;t work</strong> (well it may be possible to store the Secret, but you&#x27;ll have trouble during decoding later).</p><p>So how can a string be base64 encoded? There are plenty of ways but on Unix/Linux machines this may do the trick:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token builtin class-name" style="color:rgb(255, 203, 139)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;test&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">|</span><span class="token plain"> base64</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The resulting string can be pasted into the Secret during editing.</p><p>As with ConfigMaps changes to Secrets are automatically available in consuming Pods after a few seconds <strong>if the Secret has been mounted as a volume</strong>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="showing-a-secret-value"></a>Showing a Secret Value<a class="hash-link" href="#showing-a-secret-value" title="Direct link to heading">#</a></h2><p>Assuming you have the command <code>base64</code> installed retrieving the decoded value from a Secret can be done with:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#d6deeb"><span class="token plain">kubectl get secret area51 -o </span><span class="token assign-left variable" style="color:rgb(214, 222, 235)">jsonpath</span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;{.data.username}&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(127, 219, 202)">|</span><span class="token plain"> base64 --decode</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Where <code>username</code> is the key of the <code>area51</code> Secret to which the value should be retrieved and decoded.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="consuming-secrets-from-applications"></a>Consuming Secrets from Applications<a class="hash-link" href="#consuming-secrets-from-applications" title="Direct link to heading">#</a></h2><p>Using Secrets from a Pod is similar to using ConfigMaps.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="exercise-1"></a>Exercise<a class="hash-link" href="#exercise-1" title="Direct link to heading">#</a></h3><p>Use your new knowledge learned during the ConfigMap lessons and:</p><ol><li>Create a Pod and consume the previously created Secret <code>area51</code> as environment variables.</li><li>Create a Pod and consume the previously created Secret <code>area52</code> as a mounted volume.</li></ol><p>Hints:</p><ol><li>Use <code>secretKeyRef</code> instead of <code>configKeyRef</code>.</li><li>Use <code>secret</code> instead of <code>configMap</code> when describing the <code>volume</code>. Also change <code>name</code> to <code>secretName</code> to refer to your Secret.</li><li>Read the Kubernetes documentation [3] if you want to see exemplary Pod definitions.</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="how-secret-secrets-are"></a>How Secret Secrets are<a class="hash-link" href="#how-secret-secrets-are" title="Direct link to heading">#</a></h2><p>While Secrets are meant to deal with access credentials such as certificates and passwords, it surprises that - by default - <strong>Kubernetes stores Secrets into its etcd[1] data store without encryption</strong>. However, it is possible to configure a Kubernetes cluster to encrypt Secrets [2].</p><p><strong>Using Secrets makes it easier to apply encryption as a cluster wide setting</strong>. It is also to be expected that the handling of Secrets becomes more secure with future Kubernetes releases.</p><p>Hence, <strong>even when Secrets are unencrypted, it is a best practice to use them</strong>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="links"></a>Links<a class="hash-link" href="#links" title="Direct link to heading">#</a></h2><ol><li>etcd, <a href="https://etcd.io/" target="_blank" rel="noopener noreferrer">https://etcd.io/</a></li><li>Kubernetes Documentation, Tasks, Encrypting Secret Data at Rest, <a href="https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/" target="_blank" rel="noopener noreferrer">https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/</a></li><li>Kubernetes Documentation, Concepts, Secrets, <a href="https://kubernetes.io/docs/concepts/configuration/secret/" target="_blank" rel="noopener noreferrer">https://kubernetes.io/docs/concepts/configuration/secret/</a></li><li>Kubernetes Design Document, <a href="https://github.com/kubernetes/community/blob/master/contributors/design-proposals/auth/secrets.md" target="_blank" rel="noopener noreferrer">https://github.com/kubernetes/community/blob/master/contributors/design-proposals/auth/secrets.md</a></li><li>Docker Hub, <a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">https://hub.docker.com/</a></li><li>ACME - Automatic Certificate Management Environment, <a href="https://github.com/ietf-wg-acme/acme/" target="_blank" rel="noopener noreferrer">https://github.com/ietf-wg-acme/acme/</a></li><li>Kubernetes Documentation, Tasks, Manage TLS Certificates in a Cluster, <a href="https://kubernetes.io/docs/tasks/tls/managing-tls-in-a-cluster/" target="_blank" rel="noopener noreferrer">https://kubernetes.io/docs/tasks/tls/managing-tls-in-a-cluster/</a></li><li>Vim - The Ubiquitous Text Editor, <a href="https://www.vim.org/" target="_blank" rel="noopener noreferrer">https://www.vim.org/</a></li></ol></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/kubernetes/configmaps-and-secrets/configmaps-volume-mounts"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« ConfigMap Volume Mounts</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/kubernetes/configmaps-and-secrets/secrets-exercise-explanation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Secrets Exercise Explanation Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#related-videos" class="table-of-contents__link">Related Videos</a></li><li><a href="#types-of-secrets" class="table-of-contents__link">Types of Secrets</a></li><li><a href="#secret-types" class="table-of-contents__link">Secret Types</a><ul><li><a href="#generic" class="table-of-contents__link">Generic</a></li><li><a href="#tls" class="table-of-contents__link">TLS</a></li><li><a href="#docker-registry" class="table-of-contents__link">Docker Registry</a></li></ul></li><li><a href="#creating-generic-secrets" class="table-of-contents__link">Creating Generic Secrets</a></li><li><a href="#accessing-secrets-using-kubectl" class="table-of-contents__link">Accessing Secrets Using <code>kubectl</code></a></li><li><a href="#editing-a-secret" class="table-of-contents__link">Editing a Secret</a><ul><li><a href="#exercise" class="table-of-contents__link">Exercise</a></li></ul></li><li><a href="#showing-a-secret-value" class="table-of-contents__link">Showing a Secret Value</a></li><li><a href="#consuming-secrets-from-applications" class="table-of-contents__link">Consuming Secrets from Applications</a><ul><li><a href="#exercise-1" class="table-of-contents__link">Exercise</a></li></ul></li><li><a href="#how-secret-secrets-are" class="table-of-contents__link">How Secret Secrets are</a></li><li><a href="#links" class="table-of-contents__link">Links</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">More from anynines</h4><ul class="footer__items"><li class="footer__item"><a href="https://anynines.com/?utm_source=k8s-tutorial&amp;utm_medium=web" target="_blank" rel="noopener noreferrer" class="footer__link-item">anynines.com</a></li><li class="footer__item"><a href="https://paas.anynines.com/?utm_source=k8s-tutorial&amp;utm_medium=web" target="_blank" rel="noopener noreferrer" class="footer__link-item">anynines PaaS</a></li><li class="footer__item"><a href="https://anynines.com/jobs/?utm_source=k8s-tutorial&amp;utm_medium=web" target="_blank" rel="noopener noreferrer" class="footer__link-item">Jobs at anynines</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Follow us</h4><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/anynines" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.linkedin.com/company/anynines/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn</a></li><li class="footer__item"><a href="https://instagram.com/anyninescom" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instagram</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Legal</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.anynines.com/imprint" target="_blank" rel="noopener noreferrer" class="footer__link-item">Imprint</a></li><li class="footer__item"><a href="https://www.anynines.com/data-privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2023 anynines GmbH.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.dc5c9b92.js"></script>
<script src="/assets/js/main.de5502fe.js"></script>
</body>
</html>