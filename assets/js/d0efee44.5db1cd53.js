"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1933],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=u(n),m=a,h=d["".concat(s,".").concat(m)]||d[m]||c[m]||i;return n?r.createElement(h,o(o({ref:t},p),{},{components:n})):r.createElement(h,o({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var u=2;u<i;u++)o[u]=n[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},8048:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return u},toc:function(){return p},default:function(){return d}});var r=n(7462),a=n(3366),i=(n(7294),n(3905)),o=["components"],l={id:"publish-image",title:"Publishing a Container Image"},s=void 0,u={unversionedId:"docker/publish-image",id:"docker/publish-image",isDocsHomePage:!1,title:"Publishing a Container Image",description:"So far you have created your own container images and started them, locally. In order to make use of container images in an production environment such as a Kubernetes cluster, it is necessary to distribute container images to those clusters. As described in the introduction, the distribution of container images is supported by so called container registries.",source:"@site/docs/docker/50-publishing.md",sourceDirName:"docker",slug:"/docker/publish-image",permalink:"/a9s-kubernetes-training/docker/publish-image",tags:[],version:"current",sidebarPosition:50,frontMatter:{id:"publish-image",title:"Publishing a Container Image"},sidebar:"docs",previous:{title:"Containerizing a Simple Web App",permalink:"/a9s-kubernetes-training/docker/simple-web-app"},next:{title:"The Container Workflow",permalink:"/a9s-kubernetes-training/docker/container-workflow"}},p=[{value:"DockerHub",id:"dockerhub",children:[]},{value:"Login",id:"login",children:[]},{value:"Publishing a Container Image",id:"publishing-a-container-image",children:[{value:"The <code>latest</code> Tag",id:"the-latest-tag",children:[]}]},{value:"Links",id:"links",children:[]}],c={toc:p};function d(e){var t=e.components,n=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"So far you have created your own container images and started them, locally. In order to make use of container images in an production environment such as a Kubernetes cluster, it is necessary to distribute container images to those clusters. As described in the introduction, the distribution of container images is supported by so called ",(0,i.kt)("em",{parentName:"p"},"container registries"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"In this lesson, you will upload your previously created web app to a public container registry"),"."),(0,i.kt)("h2",{id:"dockerhub"},"DockerHub"),(0,i.kt)("p",null,"The widely used DockerHub container registry acts as a community hub to make container images publicly available. So even in case you use a private registry, it is likely that you will also interact with DockerHub, for example during the creation of your images when referring to other base images. Also, in case you want to share a container image publicly, DockerHub is a valid choice."),(0,i.kt)("p",null,"Create your own DockerHub account. It is free and you will need it during the following lessons."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"https://hub.docker.com/signup\n")),(0,i.kt)("p",null,"Now that you have created your account it's time to publish your first container image."),(0,i.kt)("h2",{id:"login"},"Login"),(0,i.kt)("p",null,"Before you can upload anything you need to login:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"docker login\n")),(0,i.kt)("p",null,"There is no need to specify DockerHub as it is docker's default registry. All you have to do is to provide your username and password."),(0,i.kt)("h2",{id:"publishing-a-container-image"},"Publishing a Container Image"),(0,i.kt)("p",null,"From previous lessons you should have a container images stored locally. You can list them with:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"docker images\n")),(0,i.kt)("p",null,"Which will show an output similar to:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"REPOSITORY                                           TAG                 IMAGE ID            CREATED             SIZE\nsimple-web-app                                       0.2.0               f6b7d3097e5e        About an hour ago   57.5MB\nsimple-web-app                                       0.1.0               3f48381de1d9        About an hour ago   57.5M\n")),(0,i.kt)("p",null,"A good practice is to tag any image version with a respective version tag. You did that for the local images with versions ",(0,i.kt)("inlineCode",{parentName:"p"},"0.1.0")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"0.2.0"),"."),(0,i.kt)("p",null,"This is how you tag the image version for an upload to the container registry:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"docker tag simple-web-app:0.2.0 <your-dockerhub-username>/simple-web-app:0.2.0\n")),(0,i.kt)("p",null,"For example:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"docker tag simple-web-app:0.2.0 fischerjulian/simple-web-app:0.2.0\n")),(0,i.kt)("p",null,"Once the image is tagged your local image list acquired with ",(0,i.kt)("inlineCode",{parentName:"p"},"docker images")," looks similar to this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"REPOSITORY                                           TAG                 IMAGE ID            CREATED             SIZE\nfischerjulian/simple-web-app                         0.2.0               f6b7d3097e5e        4 hours ago         57.5MB\nsimple-web-app                                       0.2.0               f6b7d3097e5e        4 hours ago         57.5MB\nsimple-web-app                                       0.1.0               3f48381de1d9        4 hours ago         57.5MB\n")),(0,i.kt)("p",null,"As you can see the image now exists as a local version and a version meant to be uploaded to the registry."),(0,i.kt)("p",null,"So let's upload the image:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"docker push fischerjulian/simple-web-app:0.2.0\n")),(0,i.kt)("p",null,"Once uploaded you can view the result on the DockerHub website: ",(0,i.kt)("a",{parentName:"p",href:"https://hub.docker.com/r/fischerjulian/simple-web-app"},"https://hub.docker.com/r/fischerjulian/simple-web-app")," or respectively: ",(0,i.kt)("inlineCode",{parentName:"p"},"https://hub.docker.com/r/<your-dockerhub-username>/simple-web-app"),"."),(0,i.kt)("p",null,"As the image is already stored locally we can run the image with:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"docker container run <your-dockerhub-username>/simple-web-app:0.2.0\n")),(0,i.kt)("p",null,"You can remove the image locally by running:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"docker image rm <your-dockerhub-username>/simple-web-app:0.2.0\n")),(0,i.kt)("p",null,"To pull an image from the remote repository execute:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"docker image pull <your-dockerhub-username>/simple-web-app:0.2.0\n")),(0,i.kt)("h3",{id:"the-latest-tag"},"The ",(0,i.kt)("inlineCode",{parentName:"h3"},"latest")," Tag"),(0,i.kt)("p",null,"Often you will see a tag named ",(0,i.kt)("inlineCode",{parentName:"p"},"latest")," which appears to have a special meaning. In case you have pushed your first container image in the above lesson, go to the DockerHub website and see if there is such a tag. It is not there because ",(0,i.kt)("inlineCode",{parentName:"p"},"latest")," is not a special tag. There is no guarantee that ",(0,i.kt)("inlineCode",{parentName:"p"},"latest")," will point to the most recent version of an image. This is entirely up to the author of a container image or a respective CI/CD pipeline."),(0,i.kt)("p",null,"Additionally, ",(0,i.kt)("strong",{parentName:"p"},"it is wise to use explicit version numbers"),". By using an explicit version, depdencies are declared explicitly. You always know what you get. In the above example the base image was set to ",(0,i.kt)("inlineCode",{parentName:"p"},"ruby:2.5-alpine"),". This way updating Ruby - which may break the contract to Sinatra or the Sintra application - only occurs when you - the developer - explicitly change the version of the base image. Undoubtedly, you should update your software regularly but with explicit version you avoid unexpected upgrades escalations."),(0,i.kt)("h2",{id:"links"},"Links"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"DockerHub, ",(0,i.kt)("a",{parentName:"li",href:"https://hub.docker.com/"},"https://hub.docker.com/"))))}d.isMDXComponent=!0}}]);