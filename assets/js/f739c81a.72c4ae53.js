"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1280],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return h}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),l=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=l(e.components);return a.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=l(n),h=r,d=m["".concat(c,".").concat(h)]||m[h]||u[h]||o;return n?a.createElement(d,i(i({ref:t},p),{},{components:n})):a.createElement(d,i({ref:t},p))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var l=2;l<o;l++)i[l]=n[l];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},40760:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return c},contentTitle:function(){return l},metadata:function(){return p},toc:function(){return u},default:function(){return d}});var a,r=n(87462),o=n(63366),i=(n(67294),n(3905)),s=["components"],c={id:"container-intro",title:"Containers Basics"},l=void 0,p={unversionedId:"containerization/container-intro",id:"containerization/container-intro",isDocsHomePage:!1,title:"Containers Basics",description:"Related Videos",source:"@site/docs/containerization/10-containerization.md",sourceDirName:"containerization",slug:"/containerization/container-intro",permalink:"/containerization/container-intro",tags:[],version:"current",sidebarPosition:10,frontMatter:{id:"container-intro",title:"Containers Basics"},sidebar:"docs",previous:{title:"Container Overview",permalink:"/containerization/container-overview"},next:{title:"Docker Installation",permalink:"/docker/installation"}},u=[{value:"Related Videos",id:"related-videos",children:[]},{value:"What is a Container",id:"what-is-a-container",children:[]},{value:"Container vs. VMs",id:"container-vs-vms",children:[]},{value:"Container Images",id:"container-images",children:[]},{value:"Container Registry",id:"container-registry",children:[]},{value:"Links",id:"links",children:[]}],m=(a="VideoContainer",function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.kt)("div",e)}),h={toc:u};function d(e){var t=e.components,n=(0,o.Z)(e,s);return(0,i.kt)("wrapper",(0,r.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"related-videos"},"Related Videos"),(0,i.kt)(m,{list:[{src:"https://www.youtube-nocookie.com/embed/eZ-kbmLVDDU",title:"What is a container?"},{src:"https://www.youtube-nocookie.com/embed/rtJ-Rgi7kzU",title:"Container vs. VMs"},{src:"https://www.youtube-nocookie.com/embed/0k-0GB8Mu7U",title:"Container Images & Container Registry"}],mdxType:"VideoContainer"}),(0,i.kt)("p",null,"Before diving into Kubernetes it is necessary to understand containerization basics. This chapter aims to provide a first mental model about what containers, container images and container registries are."),(0,i.kt)("h2",{id:"what-is-a-container"},"What is a Container"),(0,i.kt)("p",null,"The concept of a container carries some aspects of a virtual machine (VM) but also from a software package (such as a Debian dpkg package)."),(0,i.kt)("p",null,"The main idea of a container - just like its physical counterpart - is to achieve a standardization of software packaging. In this regard a container is similar to a Debian package ","[1]","."),(0,i.kt)("p",null,"Once a container has been started it represents a somewhat isolated runtime environment to run a piece of software, often a single purpose process."),(0,i.kt)("p",null,"The term container gained much popularity in the context of Docker ","[2]",", the first popular open source container runtime. Although Kubernetes does not rely on Docker anymore, but rather can use any runtime supporting the container runtime interface (CRI) ","[3]",", Docker remains popular for local development. So let's stick with Docker and focus on grasping container concepts."),(0,i.kt)("h2",{id:"container-vs-vms"},"Container vs. VMs"),(0,i.kt)("p",null,"The question may come to mind what the difference between a container and a virtual machine is. A virtual machine (VM) is usually what the name suggests - a flexible, virtual version of a physical server."),(0,i.kt)("p",null,"VMs usually come with a local disk that behaves like an ordinary hard disk. The VM itself - depending on the underlying architecture - adds a comparatively high overhead compared to a bare metal machine. It usually takes minutes to start a VM. Also, if there's a full operating system running inside a VM this creates a significant memory and CPU overhead."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"A container")," is - up to this point - rarely based on a hypervisor like most VMs are. Instead, it ",(0,i.kt)("strong",{parentName:"p"},"uses light-weight operating system isolation mechanisms such as Linux CGroups ","[4]"," and Linux Namespaces ","[5]"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"As a rule of thumb VMs tend to be better isolated"),". If properly configured, co-located VMs do not to interfere much with each other's performance - much less than co-located containers. Co-located means that VMs - or respectively containers - reside on the same node where a node can be either a physical machine for VMs and/or a virtual machine for containers. Often, the reason for the weaker isolation of containers is a weaker (or even absent) IO isolation for disk and network operations."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Containers are light-weight, have little overhead and thus are fast in both startup and execution"),"."),(0,i.kt)("p",null,"As mentioned earlier, the comparison is not really accurate as containers also aim at being a standard for software distribution. As such containers are different from VMs in the way software is brought into a container: using a container image."),(0,i.kt)("p",null,"In contrast to a VM, a container is meant to be stateless or at least to be as stateless as possible. So while it is OK to write temporary files to a container, the container should - according to the 12 factor manifest ","[6]"," - store state preferably in specialized data stores such as databases, message queues, etc."),(0,i.kt)("p",null,"Most container runtimes also offer some sort of persistent volumes that can be used to store data and overcome the statelessness of containers. ",(0,i.kt)("strong",{parentName:"p"},"Without such a volume restarting a container means losing all data stored in the container's filesystem"),"."),(0,i.kt)("p",null,"It depends on the container runtime configuration how these volumes are presented. They could be partitions of the underlying host - being vulnerable to container host failures - or preferably they could be remotely attached block devices with increased availability and durability."),(0,i.kt)("h2",{id:"container-images"},"Container Images"),(0,i.kt)("p",null,"A container specification contains a reference to the container image to be used. Additionally, there may be a specification of which command to be executed along with arguments to be passed to the command. But where does the command come from? ",(0,i.kt)("strong",{parentName:"p"},"The software running inside a container comes from the underlying container image"),"."),(0,i.kt)("p",null,"While there are multiple container image formats, the most popular one is the Docker ","[7]"," container image format. Docker is - at the time of this writing - still one of the most popular container engines, therefore it's worth spending some time with it. But recently vendor independent container formats such as the OCI Image Format Specification ","[8]",", which has also been adopted for Kubernetes, have become more popular. Fortunately, the Docker images are also OCI compliant."),(0,i.kt)("p",null,"In the following the term ",(0,i.kt)("em",{parentName:"p"},"container image")," is used equivalent to ",(0,i.kt)("em",{parentName:"p"},"Docker Container Image"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"A container image contains a read-only filesystem with instruction for starting a container"),".\nA container image is based on a layered filesystem. When a container is started the uppermost layer is a volatile filesystem. It is possible to read and write to the container filesystem as usually, but ",(0,i.kt)("strong",{parentName:"p"},"changes will be lost on container restart"),"."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Container images can be based on other container images"),". As container images are based on layers it is possible to inherit from a base image, apply changes to it and store these changes as a separate filesystem layer. Each layer can add, modify and even delete files from the underlying layer. The combination of a base image and its modification are then turned into a new image which can then be used as a new base layer to create further images."),(0,i.kt)("h2",{id:"container-registry"},"Container Registry"),(0,i.kt)("p",null,"Once a container image is locally created, there must be a path to the container runtime where containers should be started from it. Simply speaking, ",(0,i.kt)("strong",{parentName:"p"},"the purpose of a container registry is to store container images and distribute them to a container runtime upon request"),"."),(0,i.kt)("p",null,"There are many container registry implementations. They can be offered by public infrastructure providers, commercial vendors or be open source projects such as Harbor","[9]","."),(0,i.kt)("p",null,"During this training the widely spread registry ",(0,i.kt)("strong",{parentName:"p"},"Docker Hub")," ","[10]"," is used as it is often the default registry for both Docker hosts and Kubernetes clusters. It also provides a free tier which will suffice for the purpose of this training."),(0,i.kt)("p",null,"Now that you have a rough understanding of what a container, container image and container registry are, it is time to see these things in action."),(0,i.kt)("h2",{id:"links"},"Links"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Debian Wiki, Packaging Introduction, ",(0,i.kt)("a",{parentName:"li",href:"https://wiki.debian.org/Packaging/Intro?action=show&redirect=IntroDebianPackaging"},"https://wiki.debian.org/Packaging/Intro?action=show&redirect=IntroDebianPackaging")),(0,i.kt)("li",{parentName:"ol"},"Open Source Docker, ",(0,i.kt)("a",{parentName:"li",href:"https://www.docker.com/community/open-source"},"https://www.docker.com/community/open-source")),(0,i.kt)("li",{parentName:"ol"},"Kubernetes Documentation, Setup, Container Runtimes, ",(0,i.kt)("a",{parentName:"li",href:"https://kubernetes.io/docs/setup/production-environment/container-runtimes/"},"https://kubernetes.io/docs/setup/production-environment/container-runtimes/")),(0,i.kt)("li",{parentName:"ol"},"Linux Programmer's Manual, CGROUPS(7), ",(0,i.kt)("a",{parentName:"li",href:"http://man7.org/linux/man-pages/man7/cgroups.7.html"},"http://man7.org/linux/man-pages/man7/cgroups.7.html")),(0,i.kt)("li",{parentName:"ol"},"Linux Programmer's Manual, NAMESPACES(7), ",(0,i.kt)("a",{parentName:"li",href:"http://man7.org/linux/man-pages/man7/namespaces.7.html"},"http://man7.org/linux/man-pages/man7/namespaces.7.html")),(0,i.kt)("li",{parentName:"ol"},"The Twelve-Factor App, ",(0,i.kt)("a",{parentName:"li",href:"https://12factor.net/"},"https://12factor.net/")),(0,i.kt)("li",{parentName:"ol"},"Open Source Docker, ",(0,i.kt)("a",{parentName:"li",href:"https://www.docker.com/community/open-source"},"https://www.docker.com/community/open-source")),(0,i.kt)("li",{parentName:"ol"},"OCI Image Format Specification, ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/opencontainers/image-spec"},"https://github.com/opencontainers/image-spec")),(0,i.kt)("li",{parentName:"ol"},"Harbor, ",(0,i.kt)("a",{parentName:"li",href:"https://goharbor.io/"},"https://goharbor.io/")),(0,i.kt)("li",{parentName:"ol"},"Docker Hub, ",(0,i.kt)("a",{parentName:"li",href:"https://hub.docker.com/"},"https://hub.docker.com/"))))}d.isMDXComponent=!0}}]);