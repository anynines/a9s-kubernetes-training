(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{107:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return b}));var a=n(1),r=n(6),o=(n(0),n(138)),i={id:"introduction",title:"Pods"},c={id:"kubernetes/20-pods/introduction",title:"Pods",description:"After making first steps with containers most likely by using Docker on a local machine, it is normal to think in containers as the subject to deployments. Building a container image and starting a container from it is the idea with Docker. Not in Kubernetes.",source:"@site/docs/kubernetes/20-pods/10-introduction.md",permalink:"/a9s-kubernetes-training/docs/kubernetes/20-pods/introduction",sidebar:"docs",previous:{title:"Container Shell Access",permalink:"/a9s-kubernetes-training/docs/kubernetes/10-basics/container-shell"},next:{title:"ReplicaSets and Services",permalink:"/a9s-kubernetes-training/docs/kubernetes/40-replicaset-and-service/introduction"}},s=[{value:"From Containers to Pods",id:"from-containers-to-pods",children:[]},{value:"What is a Pod",id:"what-is-a-pod",children:[]},{value:"Creating a Pod",id:"creating-a-pod",children:[{value:"Creating a Pod From a Pod Manifest",id:"creating-a-pod-from-a-pod-manifest",children:[]},{value:"Declarative vs. Imperative Configuration",id:"declarative-vs-imperative-configuration",children:[]}]}],l={rightToc:s};function b(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"After making first steps with containers most likely by using Docker on a local machine, it is normal to think in containers as the subject to deployments. Building a container image and starting a container from it is the idea with Docker. Not in Kubernetes."),Object(o.b)("h2",{id:"from-containers-to-pods"},"From Containers to Pods"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"In Kubernetes the smallest deployable unit is not a container but a Pod"),". Pods are a composition of one or more containers. Therefore, ",Object(o.b)("strong",{parentName:"p"},"starting a single container in Kubernetes requires the definition of a Pod containing a single container"),"."),Object(o.b)("h2",{id:"what-is-a-pod"},"What is a Pod"),Object(o.b)("p",null,"A Pod is a set of containers that will be deployed to the same Kubernetes Node. All containers of a Pod will share the same IP address, ports, hostname, may communicate via IPC (interprocess communication) and share a volume (attachable storage).\nThis implies that a different Pod can be placed - along with its containers - on a different Kubernetes Node."),Object(o.b)("p",null,"The Pod concept allows the isolation of different co-located processes which closely interact. Prior to this it was rather common to place several processes inside a virtual machine. Without a container isolation between the processes it is possible that one process leaking memory consumes all VM resources causing a VM wide system failure.\nIn a Pod each container - ideally with a single purpose - has its well defined resource limits. In case a processes exceeds these limits, the container can be restarted automatically which often helps a system to survive until human intervention fixes the underlying issue.\nSo much about the theory. It's time to create a Pod."),Object(o.b)("h2",{id:"creating-a-pod"},"Creating a Pod"),Object(o.b)("p",null,"A Pod named ",Object(o.b)("em",{parentName:"p"},"busybox")," using the container image ",Object(o.b)("em",{parentName:"p"},"busybox")," can be created a simply as:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),'kubectl run busybox --image=busybox --restart=Never -- echo "Hello World" \n    \n')),Object(o.b)("p",null,"It's status can be obtained with:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),"kubectl get Pods busybox\n")),Object(o.b)("p",null,"And the log output be retrieved with:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),"kubectl logs busybox\n")),Object(o.b)("p",null,"More information about a Pod can be retrieved with the ",Object(o.b)("inlineCode",{parentName:"p"},"describe")," command that works for all Kubernetes object types:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),"kubectl describe Pod busybox\n")),Object(o.b)("p",null,"As you can see the output is quite verbose. Take your time and study its contents. Among the Pod metadata you can find a list of events including lifecycle events such as scheduling, pulling of container images and starting containers."),Object(o.b)("p",null,"To delete the Pod run:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),"kubectl delete Pod busybox\n")),Object(o.b)("h3",{id:"creating-a-pod-from-a-pod-manifest"},"Creating a Pod From a Pod Manifest"),Object(o.b)("p",null,"Alternatively, the Pod can be created from a Pod Manifest ",Object(o.b)("inlineCode",{parentName:"p"},"10-pod.yaml"),":"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-YAML"}),'apiVersion: v1\nkind: Pod\nmetadata:\n  name: busybox\nspec:\n  containers:\n    - image: busybox\n      name: busybox\n      command: ["echo"]\n      args: ["Hello World"]\n  restartPolicy: Never\n')),Object(o.b)("p",null,"Apply ",Object(o.b)("inlineCode",{parentName:"p"},"10-pod.yaml"),":"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),"kubectl apply -f 10-pod.yaml\n")),Object(o.b)("p",null,"To delete the Pod execute:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),"kubectl delete -f 10-pod.yaml\n")),Object(o.b)("p",null,"Or use the command from above:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{}),"kubectl delete Pod busybox\n")),Object(o.b)("h3",{id:"declarative-vs-imperative-configuration"},"Declarative vs. Imperative Configuration"),Object(o.b)("p",null,"The usage of a Manifest file is part of a central Kubernetes paradigm of ",Object(o.b)("em",{parentName:"p"},"declarative configuration"),". With the declarative approach the ",Object(o.b)("em",{parentName:"p"},"desired state")," of a system is described. In this case that a Pod should be running. Notice, that it is not specified where the Pod should be running as this is up to Kubernetes to decide. All we care is that the Pod is running.\nIn contrast to the declarative configuration an ",Object(o.b)("em",{parentName:"p"},"imperative approach")," would be to tell the cluster to start a Pod on Node XY which means more responsibility for the client than the server."),Object(o.b)("p",null,"In Kubernetes the idea is: declare how the system should look like and have a server side controller take care of the rest. We'll encounter this concept many times throughout this training."))}b.isMDXComponent=!0},138:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=r.a.createContext({}),b=function(e){var t=r.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):c({},t,{},e)),n},d=function(e){var t=b(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},p=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=b(n),p=a,m=d["".concat(i,".").concat(p)]||d[p]||u[p]||o;return n?r.a.createElement(m,c({ref:t},l,{components:n})):r.a.createElement(m,c({ref:t},l))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=p;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:a,i[1]=c;for(var l=2;l<o;l++)i[l]=n[l];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}p.displayName="MDXCreateElement"}}]);