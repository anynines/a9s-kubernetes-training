<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus">


<title data-react-helmet="true">Ingress | Kubernetes Training</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"><meta data-react-helmet="true" property="og:title" content="Kubernetes Training"><meta data-react-helmet="true" property="og:image" content="https://anynines.github.io/a9s-kubernetes-training/img/logo.svg"><meta data-react-helmet="true" property="twitter:image" content="https://anynines.github.io/a9s-kubernetes-training/img/logo.svg"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Kubernetes Training"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="description" content="Pods and ReplicaSets can be used to start and operate containers. Services can be handy to provide named access to and distribute and load balance requests across Pods, **internally**."><meta data-react-helmet="true" property="og:description" content="Pods and ReplicaSets can be used to start and operate containers. Services can be handy to provide named access to and distribute and load balance requests across Pods, **internally**."><meta data-react-helmet="true" property="og:url" content="https://anynines.github.io/a9s-kubernetes-training/docs/kubernetes/40-replicaset-and-service/ingress">

<link data-react-helmet="true" rel="shortcut icon" href="/a9s-kubernetes-training/img/favicon.ico">


<link rel="stylesheet" href="/a9s-kubernetes-training/styles.02746a95.css">


<link rel="preload" href="/a9s-kubernetes-training/styles.cd22f2db.js" as="script">

<link rel="preload" href="/a9s-kubernetes-training/runtime~main.6fe15a52.js" as="script">

<link rel="preload" href="/a9s-kubernetes-training/main.cfd326d7.js" as="script">

<link rel="preload" href="/a9s-kubernetes-training/1.78db2c66.js" as="script">

<link rel="preload" href="/a9s-kubernetes-training/1be78505.c6a04302.js" as="script">

<link rel="preload" href="/a9s-kubernetes-training/38.ba61ca52.js" as="script">

<link rel="preload" href="/a9s-kubernetes-training/af5bda9d.e513fb6f.js" as="script">

<link rel="preload" href="/a9s-kubernetes-training/17896441.fa0e84b7.js" as="script">

<link rel="preload" href="/a9s-kubernetes-training/8818c621.d8fb1265.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/a9s-kubernetes-training/"><img class="navbar__logo" src="/a9s-kubernetes-training/img/logo.svg" alt="anynines"><strong class="navbar__title">Kubernetes Training</strong></a><a class="navbar__item navbar__link" href="/a9s-kubernetes-training/docs/containerization/container-overview">Container Training</a><a class="navbar__item navbar__link" href="/a9s-kubernetes-training/docs/kubernetes/kubernetes-overview">Kubernetes Training</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://github.com/anynines">GitHub</a><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://paas.anynines.com">anynines PaaS</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/a9s-kubernetes-training/"><img class="navbar__logo" src="/a9s-kubernetes-training/img/logo.svg" alt="anynines"><strong class="navbar__title">Kubernetes Training</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/containerization/container-overview">Container Training</a></li><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/kubernetes/kubernetes-overview">Kubernetes Training</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://github.com/anynines">GitHub</a></li><li class="menu__list-item"><a class="menu__link" target="_blank" rel="noopener noreferrer" href="https://paas.anynines.com">anynines PaaS</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="sidebarLogo_3ono"><img src="/a9s-kubernetes-training/img/logo.svg" alt="anynines"><strong>Kubernetes Training</strong></div><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/training-overview">Kubernetes Training Overview</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">Containerization</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/containerization/container-overview">Container Overview</a></li><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/containerization/container-intro">Containers Basics</a></li><li class="menu__list-item"><a class="menu__link" href="#!">Docker</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/docker/installation">Docker Installation</a></li><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/docker/docker-basics">Docker Basics</a></li><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/docker/creating-images">Creating Container Images</a></li><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/docker/simple-web-app">Containerizing a Simple Web App</a></li><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/docker/publish-image">Publishing a Container Image</a></li><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/docker/container-workflow">The Container Workflow</a></li><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/docker/docker-cheatsheet">Docker Cheat Sheet</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">Kubernetes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/kubernetes/kubernetes-overview">Kubernetes Overview</a></li><li class="menu__list-item"><a class="menu__link" href="#!">Basics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/kubernetes/10-basics/kubectl">kubectl Basics</a></li><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/kubernetes/10-basics/namespaces">Namespaces</a></li><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/kubernetes/10-basics/container-shell">Container Shell Access</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">Pods</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/kubernetes/20-pods/introduction">Pods</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">ReplicaSets and Services</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/kubernetes/40-replicaset-and-service/introduction">ReplicaSets and Services</a></li><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/kubernetes/40-replicaset-and-service/replicasets">ReplicaSets</a></li><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/kubernetes/40-replicaset-and-service/services">Services</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/a9s-kubernetes-training/docs/kubernetes/40-replicaset-and-service/ingress">Ingress</a></li><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/kubernetes/40-replicaset-and-service/tidyup">Tyding Up</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">Deployments</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/kubernetes/50-deployments/deployments">Deployments</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">ConfigMaps and Secrets</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/kubernetes/60-configmaps-and-secrets/configmaps-and-secrets">ConfigMaps and Secrets</a></li><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/kubernetes/60-configmaps-and-secrets/configmaps">ConfigMaps</a></li><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/kubernetes/60-configmaps-and-secrets/exercise-explanation">Exercise Explanation</a></li><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/kubernetes/60-configmaps-and-secrets/configmaps-volume-mounts">ConfigMap Volume Mounts</a></li><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/kubernetes/60-configmaps-and-secrets/secrets">Secrets</a></li><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/kubernetes/60-configmaps-and-secrets/secrets-exercise-explanation">Secrets Exercise Explanation</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="#!">Jobs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/kubernetes/70-jobs/jobs">Jobs</a></li><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/kubernetes/70-jobs/advanced-jobs">Advanced Job Features</a></li><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/kubernetes/70-jobs/parallel-jobs">Parallel Jobs</a></li><li class="menu__list-item"><a class="menu__link" href="/a9s-kubernetes-training/docs/kubernetes/70-jobs/cron-jobs">CronJobs</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Ingress</h1></header><div class="markdown"><p>Pods and ReplicaSets can be used to start and operate containers. Services can be handy to provide named access to and distribute and load balance requests across Pods, <strong>internally</strong>.</p><p>Most application systems have a publicly facing interface, too. In order to expose a web service or web application to outside world, an additional Kubernetes resource comes is useful: <strong>the Ingress</strong>.</p><p>In contrast to Kubernetes Services which operate on layer 4 (transport) of the ISO OSI model (<a href="https://en.wikipedia.org/wiki/OSI_model">https://en.wikipedia.org/wiki/OSI_model</a>), Ingresses operate on layer 7 (application). This means that an Ingress knows the HTTP protocol and is able to read and interpret incoming HTTP requests enabling a number of additional options. A major benefit is the ability to create <strong>virtual hosts</strong>. </p><p>Virtual hosts address the challenge of pointing multiple domain names to a single IP address in a way that the &quot;web server&quot; is able to map domain names to the corresponding applications.</p><p>So with the Ingress concept it is possible to map incoming requests based on the desired domain contained in the HTTP Header to applications running within Kubernetes.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="ingress-is-not-built-in-to-kubernetes"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#ingress-is-not-built-in-to-kubernetes" title="Direct link to heading">#</a>Ingress is not Built-In to Kubernetes</h2><p>While Ingress is a Kubernetes concept, there is no built-in Kubernetes implementation. In Kubernetes terminology: <strong>Kubernetes does not ship with a default Ingress Controller</strong>. Therefore, each Kubernetes implementation may come with a different Ingress Controller which in turn may offer slightly different features and configuration options but generally they are likely to cover the same core functionality.</p><p>One reason for this is that load balancing is a non-trivial problem to solve. It is highly available applications and has is related to topics such as networking, DNS and SSL certificate management. </p><p>At some point there must be one or more highly available load balancers distributing incoming requests. These load balancers can be Kubernetes or infrastructure (e.g. AWS) provided software load balancers or even good old hardware appliances.</p><p>As a takaway, it is worth spending a few minutes on looking at a particular Ingress implementation when using a particular Kubernets distribution for the first time.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="dns-entries-and-ssl-certificates"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#dns-entries-and-ssl-certificates" title="Direct link to heading">#</a>DNS Entries and SSL Certificates</h3><p>It is easy to use <code>kubectl proxy</code> to access Kubernetes workloads as it does not require much configuration. However, exposing an application to the outside world usually requires the configuration of a domain or sub-domain dedicated to the application such as <code>myapp.example.org</code>.</p><p>This it very Kubernetes can&#x27;t do much for you as controlling DNS entries is out of its scope and so is requesting and issuing SSL certificates.</p><p>For the creation of DNS entries you might want to create:</p><ul><li>An <strong>A-Record</strong> to point a (sub-)domain to the IP address of your load balancer.</li><li>A <strong>CNAME-Record</strong> to point a (sub-)domain to the DNS name of your load balancer.</li></ul><p>The configuration of DNS entries varies across DNS providers. Their manuals will guide you through the process.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="creating-an-ingress"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#creating-an-ingress" title="Direct link to heading">#</a>Creating an Ingress</h2><p>This works on an a9s K8s cluster by creating the file <code>40-ingress-hello-world-a9s.yaml</code>:</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-YAML codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: networking.k8s.io/v1beta1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kind: Ingress</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  name: smpl-go-web-ingress</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  annotations:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    # use the shared ingress-nginx</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    kubernetes.io/ingress.class: &quot;nginx&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  tls:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    - hosts:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      - smpl-go-web-c9c99a1c-e1d5-4401-8aed-bd54319c7ca7.de.k9s.a9s.eu</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      secretName: k9s-anynines-com-tls</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  rules:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  - host: smpl-go-web-c9c99a1c-e1d5-4401-8aed-bd54319c7ca7.de.k9s.a9s.eu</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    http:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      paths:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      - path: /</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        backend:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          serviceName: smpl-go-web-s</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          servicePort: 8080</span></div></code></pre></div><p>Apply it:</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl apply -f 40-ingress-hello-world-a9s.yaml</span></div></code></pre></div><p>In order to verify whether the Ingress has been created list existing Ingresses:</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-undefined codeBlock_19pQ"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><code class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl get ingress</span></div></code></pre></div><p>In the output you can obtain the url in the <code>HOSTS</code> attribute it may look similar to <code>smpl-go-web-c9c99a1c-e1d5-4401-8aed-bd54319c7ca7.de.k9s.a9s.eu</code>. <strong>Paste the url into your browser and you should see the output from the example web app</strong>.</p><p>Congratulations! You have successfully deployed a web application.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/a9s-kubernetes-training/docs/kubernetes/40-replicaset-and-service/services"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« Services</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/a9s-kubernetes-training/docs/kubernetes/40-replicaset-and-service/tidyup"><h5 class="pagination-nav__link--sublabel">Next</h5><h4 class="pagination-nav__link--label">Tyding Up »</h4></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#ingress-is-not-built-in-to-kubernetes" class="contents__link">Ingress is not Built-In to Kubernetes</a><ul><li><a href="#dns-entries-and-ssl-certificates" class="contents__link">DNS Entries and SSL Certificates</a></li></ul></li><li><a href="#creating-an-ingress" class="contents__link">Creating an Ingress</a></li></ul></div></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="text--center"><div>Copyright © 2020 anynines GmbH.</div></div></div></footer>
</div>

<script src="/a9s-kubernetes-training/styles.cd22f2db.js"></script>

<script src="/a9s-kubernetes-training/runtime~main.6fe15a52.js"></script>

<script src="/a9s-kubernetes-training/main.cfd326d7.js"></script>

<script src="/a9s-kubernetes-training/1.78db2c66.js"></script>

<script src="/a9s-kubernetes-training/1be78505.c6a04302.js"></script>

<script src="/a9s-kubernetes-training/38.ba61ca52.js"></script>

<script src="/a9s-kubernetes-training/af5bda9d.e513fb6f.js"></script>

<script src="/a9s-kubernetes-training/17896441.fa0e84b7.js"></script>

<script src="/a9s-kubernetes-training/8818c621.d8fb1265.js"></script>


</body>
</html>